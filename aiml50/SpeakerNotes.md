# <a name="speaker-notes"></a>発表者ノート

## <a name="slides"></a>スライド

* スライド: # 1

* スライド: # 2
  * 機械学習と DevOps の 2 つは、現在ホットな流行語となっています。 機械学習は、より多くの組織にとって身近なものになりつつありますが、利用する可能性が増すにつれ、Machine Learning (ML) プロジェクトも他のソフトウェアと同じ方法で管理する必要が生じています。
  * MLOps (Machine Learning Operations または DevOps for Machine Learning) とは DevOps と Machine Learning が融合したものであり、これが本日のテーマです。

* スライド: # 3
  * 始める前に、このスライドのスクリーンショットは、ご自由に撮ることができます。 このデッキと、このプレゼンテーションで使用されているすべてのリソースについては、これらのリンクにアクセスしてください。

* スライド: # 4
  * プログラミングでは、アルゴリズムを記述して問題を解決します
  * アルゴリズムを通してデータを実行 (または入力) し、答えを得ます
  * 重要な点は、その問題を解決する方法を知っている (または解決できる) ことです
  * アルゴリズムがどのようなものかわかっていないと、どうなるでしょうか。 たとえば、 写真に鳥が写っているか、申請者がローンの債務不履行を起こす確率はどのくらいか、といった例ではどうでしょうか。

* スライド: # 5
  * これらは機械学習が得意とする問題です
  * 機械学習では、180 度反転させて、正解と対応する入力の例を多数提供することでこれらの問題を解決し、そのアルゴリズムをコンピューターに決定させます

* スライド: # 6
  * ここで行うのは、そのデータを説明する "モデル" をコンピューターに構築させることです

* スライド: # 7
  * これのすばらしい点は、モデルをどのように使用するかがわかっていれば、アルゴリズムを記述していなくても、そのモデルを使用できるということです。

* スライド: # 8
  * モデルを使用することで、予測を得ることができます
  * 注: これらは予測であり、私たちが考えるような答えではありません
  * これらの予測の品質と精度は、モデルのトレーニングに使用した手法とアルゴリズム、さらに重要なものとして、モデルのトレーニングに使用したデータによって変化します
  * バイアスのかかったデータを使用してモデルをトレーニングしていれば、得られるのはバイアスのかかったモデルです

* スライド: # 9
  * [デモ #1 をご覧ください](./demos/1-Show_Faulty_Prediction.md)

* スライド: # 10
  * 予測モデルの作成時に生じる作業について話しましょう
  * 通常、データの検出、変換、準備などがあり、 モデルの構築とそのデータを使用したトレーニングなどもあり、 そのモデルの適合性の評価もあります
  * これは反復性の高い実験プロセスです。長期間にわたって何度も振り出しに戻る可能性があるということです。
  * モデルを実際にデプロイする段階になると、多くの場合、ソフトウェアで行ったのと同じような方法になります。つまり、パッケージ化して、開発者または運用チームが何らかの方法でデプロイできるようにします

* スライド: # 11
  * 作成プロセスは、データ サイエンティストのマシン、または大量のトレーニングを行うための共有ハードウェアで行われることが多いです
  * また、デプロイでは、USB ドライブの受け渡しや、さらにはメール送信の方法がかなりの頻度で使われます。

* スライド: # 12
  * これを、優れた DevOps プロセスと比較してみましょう。DevOps では、計画、開発とテスト、リリースしてテストを行い、運用環境へ移行し、運用環境で動作を監視します。
  * でも、DevOps はソフトウェア開発だけのものでしょうか。 最初にお話ししたアルゴリズムにはどうでしょうか。

* スライド: # 13
  * Microsoft の DevOps の定義を見てみましょう (お読みください)。
  * ここで最も重要な言葉は "価値" です。 DevOps は、コードやバグの修正に関するものではなく、価値の継続的デリバリーを行うものです。
  * 予測モデルがあり、そのモデルを改善できるのなら、それは絶対に価値があります。
  * したがって、この定義は ML を除外するものではありません。
  * それでは、有用な製品を見てみましょう。

* スライド: # 14

* スライド: # 15
  * Azure Machine Learning service は、MLOps (DevOps for ML) の取り組みを支援する一連のサービスです。
  * これは、ml.azure.com にアクセスして利用できます
  * 管理に役立つ項目をいくつか掘り下げてみましょう

* スライド: # 16
  * 一覧になっているので、個々のポイントごとに説明します

* スライド: # 17
  * ここでは、Pipelines に焦点を当てます。 Pipelines は、モデルをトレーニングするためのワークフローであり、反復可能な方法で予測モデルを構築できるように、構築する必要があります。

* スライド: # 18
  * Azure Pipelines について聞いたことがあるかもしれませんが、これらは異なる製品であることに注意することが重要です。
  * 違いについてはこの後すぐに説明しますが、おおまかに言えば、ML Pipelines はワークフローのトレーニングに適し、Azure Pipelines はオーケストレーションに適しています。 それぞれ、焦点が異なります。

* スライド: # 19
  * 何が違いますか。 なぜ両方を使用するのでしょうか。

* スライド: # 20
  * ML Pipelines は、ML 固有のワークフロー用に設計されています。
  * 無人実行 - ML トレーニングは実行時間が非常に長くなる可能性がありますが、ML パイプラインはその処理に非常に優れています
  * 再利用可能性 - ワークフローの個々のステップはリソースが集中的に使用されることがあり、毎回実行する必要があるとは限りません。 データ準備ステップを再度実行する必要がない場合は、前回の出力を再利用するだけで済みます。
  * 追跡 - 格納されるすべてのものが、一般的なソフトウェアの構築ではなく、ML に重点が置かれています

* スライド: # 21
  * これに対し、Azure Pipelines は CI/CD 用に設計されています
  * ゲート - 品質とチェック アンド バランスを組み入れるのに最適な場所です
  * 統合 - 他のアプリケーション、成果物、依存関係と統合します
  * トリガー - さまざまな理由でオーケストレーションをトリガーできます

* スライド: # 22
  * パイプラインを構築するときは、これらのサービスのほとんどを実際に使用しています

* スライド: # 23
  * データのトレーニングにデータセットまたはデータストアを使用し、実験を実行してマネージド コンピューティングを使用したトレーニングを行うと、モデルが完成します。
  * 後でこのモデルをデプロイしますが、話を元に戻します。

* スライド: # 24
  * [デモ #2 をご覧ください](./demos/2-Build_a_Pipeline_With_Notebooks.md)

* スライド: # 25
  * これが、作成した AML パイプラインです
  * データ準備

* スライド: # 26
  * トレーニング ステップ

* スライド: # 27
  * モデルの登録

* スライド: # 28
  * データセット (またはデータ ソース) とコンピューティングも利用します

* スライド: # 29
  * しかし、ここではチーム作業について話しましょう。

* スライド: # 30
  * ソフトウェア開発で使用する優れた DevOps 手法には、ML プロジェクトにも適用できるものがあります。次はそのことについて説明します。

* スライド: # 31
  * Jupyter Notebook のファイルには入力だけでなく、出力も含まれます。 これはわかりにくく、ファイルのマージを難しくする可能性があります。 そのため、入力セル (実行されるコード) のみが必要です。
  * また、パイプライン内のすべてを定義できます (これが目的です)
  * インフラストラクチャ (コンピューティングなど) と依存関係 (Python の依存関係、ライブラリなど) も同様です
  * また、概念実証を試すには、全体ではなく一部のデータのみで十分な可能性があります (ML プロジェクト内には多数の PB が存在する可能性があるため)

* スライド: # 32
  * 既知の共有データ ソースは、すべてのデータ サイエンティストが同じトレーニング データに対してトレーニングしていることを意味し、 そのトレーニング データがモデルの生成にも使用されているということです

* スライド: # 33
  * CI について説明しましょう。 以下が行いたいことです。
  * ソース リポジトリ内で、いつコードが変更されるのかを知る
  * トレーニング方法を変更した場合は、AML パイプラインを更新して実行する
  * コードの品質も確認したい。コードなので、テストや lint などが必要
  * また、PR プロセスを追加して、マスターにマージする (そして、コストのかかる可能性があるトレーニング ジョブを開始する) 前にコードのコンパイルが引き続きできるようにする
  * Azure DevOps の詳細については、こちらをご覧ください。

* スライド: # 34
  * 重要な点は、これがすべてコードとソフトウェアであることです。 コードの品質は、コードを書くことに慣れていない場合でも重要です。

* スライド: # 35
  * [デモ #3 をご覧ください](./demos/3-Show_The_Build_And_Release.md)

* スライド: # 36
  * でも、まだ何もデプロイしていません。新しくトレーニングしたモデルがありますが、どのようにデプロイしますか。
  * AML service には、モデルを取得して、ACI または AKS にデプロイする機能があります。ここではそれを利用し、UI からは直接操作しません。

* スライド: # 37
  * AML パイプラインにもう 1 ステップを追加することもできますが、それはしたくありません。デプロイをもう少し細かく制御したいのです。

* スライド: # 38
  * 継続的デリバリーは、ML に全面的に適用できます。
  * 継続的デリバリーには、Azure Pipelines を使用します。
  * 新しいモデルが登録されたら、デプロイを開始します
  * Azure Pipelines を使用すると、新しいモデルを公開する前に、テスト サイトおよびステージング サイトにデプロイできます
  * 運用前環境でテストを実行できます
  * 重要な点は、行おうとしていることが、他のソフトウェアで使用しているのと同じ手法を使用したロールアウト制御であることです。

* スライド: # 39
  * 新しいモデルをそのまま運用環境に配置することはしないでください。他のソフトウェアでしないことは、ML でもしないでください。

* スライド: # 40
  * これが、ここまで作成したものです。
  * トレーニング用パイプライン。これは AML パイプラインで、このモデルのトレーニングに固有です
  * 新しいモデルを取得したら、Azure DevOps でデプロイ パイプラインを開始します
  * ACI にデプロイし、いくつかテストを実行し、すべて問題がなければ、AKS にデプロイできるでしょう

* スライド: # 41
  * 他のソフトウェアと同様、モデルを運用環境に配置し、常に機能するだろうと見なして、そのまま放置することは望ましくありません。
  * そのため、再トレーニング戦略が必要です。
  * 定期的、または運用環境のデータが変わったために必要な結果が得られない状態になった時点で行います。
  * Azure ML service には、これに対する解決策があります

* スライド: # 42
  * トレーニングする場合は、既知のトレーニング データ セットから行うことができます
  * 最終的にモデルを運用環境にデプロイするとき、入力を別のデータセット (推論データセット) に格納できます

* スライド: # 43
  * AML service では、定期的にこれらの 2 つのデータ セットを比較して、"データ ドリフト" を探します。 運用環境で目にしているものが、モデルのトレーニングに使ったものとあまりにもずれている場合は、新しいトレーニング プロセスを開始して新しいモデルを生成できます。
  * これは自動的に行うことができます

* スライド: # 44
  * 当然、コードを変更する場合は、トレーニング パイプラインも変更する必要があり、本日はこのことを確認しました。

* スライド: # 45
  * 重要な点は、これは単なる一例であることです。ここではモデルをコンテナーにデプロイしていますが、モデルをソフトウェアに埋め込むこともできます
  * あるいは、AML をまったく使用しないかもしれません。別のコグニティブ サービスを使用する場合もあり、それらにはすべて、Azure Pipelines が通信できる優れた API が用意されています。
  * 最終的に、Azure Pipelines では何でも調整できるため、使用しているツール セットが何であれ、それを使用してトレーニングを管理できます。

* スライド: # 46
  * まとめ

* スライド: # 47

* スライド: # 48

* スライド: # 49

* スライド: # 50
  * その他のリソースとソース コードは、これらのリンクで確認できます

* スライド: # 51
  * また、Microsoft 認定 Azure Data Scientist Associate または Microsoft 認定 Azure AI Engineer Associate になるための認定資格をご確認いただけます

* スライド: # 52
  * Microsoft は初めて、すべてのイベント参加者に無料で認定試験が受けられる機会を提供します。 この機会は、基本またはロール ベースのどの認定資格にもご利用いただけます。
  * 試験を無料で 1 回受けることができ、イベント後 6 か月間有効です。
  * この特典は、イベント エキスポ ホール内のオンサイト テストでご利用いただくか、イベントのサインアップに使用したのと同じメール アドレスを使用してイベント後に使用することもできます。 (政府 関係者は対象外です)
  * Microsoft からのプロモーション メールの受信に同意された方には、イベント後に、詳細を記載したメールをお送りします。

* スライド: # 53
